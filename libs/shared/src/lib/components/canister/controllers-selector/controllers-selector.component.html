<div class="space-y-3">
  <div>
    <label class="text-sm font-medium mb-2 block">Add Controllers</label>
    <form [formGroup]="form" (ngSubmit)="_onAdd()" class="flex gap-2">
      <hlm-input-group class="flex-1">
        <input
          hlmInputGroupInput
          formControlName="controller"
          placeholder="Ex. your dfx principal"
          [attr.aria-invalid]="controllerControl.invalid"
          class="aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"
        />
        @if (controllerControl.invalid && controllerControl.touched) {
          <ng-icon
            hlmTooltipTrigger
            [hlmTooltipTrigger]="'Invalid Principal format.'"
            name="lucideTriangleAlert"
            class="size-4 text-destructive"
          />
          <hlm-tooltip />
        }
        <button
          hlmInputGroupButton
          type="submit"
          [disabled]="controllerControl.invalid || disabled()"
          size="icon-sm"
        >
          <ng-icon name="lucidePlus" />
        </button>
      </hlm-input-group>
    </form>
  </div>

  @if (controllers().length > 0) {
    <div class="space-y-2">
      @for (controller of controllers(); track controller.toText()) {
        <shared-controller-item
          class="block"
          [controller]="controller"
          [principalText]="controller.toText()"
          [isCurrentUser]="isCurrentUser(controller)"
          [disabled]="disabled()"
          (remove)="_onRemove($event)"
        />
      }
    </div>
  }
</div>
