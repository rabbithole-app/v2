<div class="mx-auto max-w-2xl space-y-6">
  <h1 class="text-2xl font-semibold">Edit Profile</h1>

  <form [formGroup]="form" class="space-y-6">
    <!-- Avatar Editor -->
    <div class="flex justify-center">
      <core-avatar-editor formControlName="avatarUrl" />
    </div>

    <!-- Username (read-only) -->
    <hlm-form-field>
      <label hlmLabel for="username">Username</label>
      <input
        hlmInput
        id="username"
        [value]="profile()?.username ?? ''"
        readonly
        disabled
        class="bg-muted"
      />
      <hlm-hint>Username cannot be changed</hlm-hint>
    </hlm-form-field>

    <!-- Display Name Field -->
    <hlm-form-field>
      <label hlmLabel for="displayName">Display Name (Optional)</label>
      <input
        hlmInput
        id="displayName"
        formControlName="displayName"
        placeholder="Enter your display name"
      />
      <hlm-hint>This name will be visible to other users</hlm-hint>
    </hlm-form-field>

    <!-- Action Buttons -->
    <div class="flex items-center justify-between gap-4">
      <button
        hlmBtn
        type="button"
        variant="destructive"
        (click)="handleDelete()"
        [disabled]="deleting()"
        class="w-full sm:w-auto"
      >
        @if (deleting()) {
          <hlm-spinner class="size-4 mr-0.5" />
          Deleting...
        } @else {
          Delete Profile
        }
      </button>

      <div class="flex gap-2">
        @if (loading()) {
          <button
            hlmBtn
            type="button"
            variant="outline"
            disabled
            class="w-full sm:w-auto"
          >
            <hlm-spinner class="size-4 mr-0.5" />
            Saving...
          </button>
        } @else {
          <button
            hlmBtn
            type="button"
            (click)="handleSubmit()"
            [disabled]="form.invalid"
            class="w-full sm:w-auto"
          >
            Save Changes
          </button>
        }
      </div>
    </div>
  </form>
</div>
