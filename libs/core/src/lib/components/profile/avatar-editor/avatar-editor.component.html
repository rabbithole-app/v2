<div
  class="group relative"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()"
>
  <hlm-avatar
    class="size-[140px] transition-all duration-500 ease-in-out group-hover:grayscale"
  >
    <img
      hlmAvatarImage
      [src]="avatarSrc()"
      alt="Avatar"
      class="transition-all duration-500 ease-in-out"
    />
    <img
      hlmAvatarFallback
      src="/avatar-placeholder.svg"
      alt="Avatar placeholder"
      class="transition-all duration-500 ease-in-out"
    />
  </hlm-avatar>

  <!-- Dimming overlay layer -->
  <div
    class="absolute inset-0 rounded-full bg-black/50 transition-opacity duration-300 ease-in-out"
    [class.opacity-0]="!showControls()"
    [class.opacity-100]="showControls()"
    [class.pointer-events-none]="!showControls()"
  ></div>

  <!-- Layer for action buttons -->
  <div
    class="absolute inset-0 flex items-center justify-center gap-2 transition-opacity duration-300"
    [class.opacity-0]="!showControls()"
    [class.opacity-100]="showControls()"
    [class.pointer-events-none]="!showControls()"
    [class.pointer-events-auto]="showControls()"
  >
    <button
      hlmBtn
      type="button"
      size="icon"
      variant="secondary"
      class="size-8"
      [hlmTooltip]="'Edit'"
      [style.animation]="
        showControls() ? 'bounce-in 0.6s ease-out 0.1s both' : 'none'
      "
      (click)="handleEdit()"
    >
      <ng-icon hlm size="sm" name="lucidePencil" />
    </button>

    @if (hasValue()) {
      <button
        hlmBtn
        type="button"
        size="icon"
        variant="secondary"
        class="size-8 text-destructive hover:text-destructive"
        [hlmTooltip]="'Delete'"
        [style.animation]="
          showControls() ? 'bounce-in 0.6s ease-out 0.2s both' : 'none'
        "
        (click)="handleDelete()"
      >
        <ng-icon hlm size="sm" name="lucideTrash" />
      </button>
    }
  </div>
</div>
