@if (canisterStatus(); as status) {
  <div class="space-y-6">
    <!-- Header with title, select and action buttons -->
    <div class="flex items-center justify-between gap-4">
      <div class="flex items-center gap-4">
        <h1 class="text-2xl font-semibold">Canister Management</h1>
        
        <div hlmButtonGroup>
          <brn-select
            class="[&>div>hlm-select-trigger>button]:rounded-r-none"
            [value]="currentCanisterId()"
            (valueChange)="_onCanisterChange($event)"
          >
            <hlm-select-trigger class="w-64">
              <hlm-select-value>
                <ng-template hlmSelectValue let-selected>
                  {{ selected || 'Select canister' }}
                </ng-template>
              </hlm-select-value>
            </hlm-select-trigger>
            <hlm-select-content>
              @for (canisterId of canisterList(); track canisterId) {
                <hlm-option [value]="canisterId">
                  {{ canisterId }}
                </hlm-option>
              }
            </hlm-select-content>
          </brn-select>
          <button
            hlmBtn
            variant="outline"
            size="icon"
            [disabled]="isLoadingStatus()"
            (click)="_refreshStatus()"
          >
            @if (isLoadingStatus()) {
              <hlm-spinner class="size-4" />
            } @else {
              <ng-icon hlm size="sm" name="lucideRefreshCw" />
            }
          </button>
        </div>
      </div>

      @if (isController()) {
        <shared-wasm-install>
          <shared-frontend-upload>
            <div hlmButtonGroup>
              <button hlmBtn variant="outline" sharedWasmInstallTrigger>
                <ng-icon hlm size="sm" name="lucideBinary" />
                Install WASM
              </button>
              <button hlmBtn variant="outline" sharedFrontendUploadTrigger>
                <ng-icon hlm size="sm" name="lucidePackage" />
                Install frontend
              </button>
            </div>
          </shared-frontend-upload>
        </shared-wasm-install>
      }
    </div>

    <!-- Main content -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 items-start">
      <!-- Runtime Section -->
      <shared-canister-runtime [canister]="status" variant="muted" class="self-start" />

      <!-- Memory Section -->
      <shared-canister-memory [canister]="status" variant="muted" class="h-full" />

      <!-- Health Check Section -->
      <shared-canister-health-check [canister]="status" variant="muted" class="self-start" />
    </div>

    <!-- Controllers Section -->
    <div class="col-span-full">
      <shared-canister-controllers-table
        [controllers]="controllers()"
        [currentPrincipalId]="currentPrincipalId()"
        [loadingState]="loadingState()"
        (addController)="_handleAddController($event)"
        (removeController)="_handleRemoveController($event)"
      />
    </div>
  </div>
}

